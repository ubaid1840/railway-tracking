(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4816:function(e,t,n){Promise.resolve().then(n.bind(n,316))},316:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});var a=n(7437),r=n(2265),s=n(610),i=n(4340),l=n(9386),c=n(5874),o=n(2081),d=n(4937),u=n(3682),h=n(5151),m=n(8713),x=n(9506),f=n(9636),j=n(9372),[b,p]=(0,n(2730).k)({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),g=(0,h.G)((e,t)=>{let n=(0,m.jC)("Table",e),{className:r,layout:s,...i}=(0,x.Lr)(e);return(0,a.jsx)(b,{value:n,children:(0,a.jsx)(f.m.table,{ref:t,__css:{tableLayout:s,...n.table},className:(0,j.cx)("chakra-table",r),...i})})});g.displayName="Table";var y=(0,h.G)((e,t)=>{let n=p();return(0,a.jsx)(f.m.thead,{...e,ref:t,__css:n.thead})}),w=(0,h.G)((e,t)=>{let n=p();return(0,a.jsx)(f.m.tr,{...e,ref:t,__css:n.tr})}),v=(0,h.G)((e,t)=>{let{isNumeric:n,...r}=e,s=p();return(0,a.jsx)(f.m.th,{...r,ref:t,__css:s.th,"data-is-numeric":n})}),S=(0,h.G)((e,t)=>{let n=p();return(0,a.jsx)(f.m.tbody,{...e,ref:t,__css:n.tbody})}),_=(0,h.G)((e,t)=>{let{isNumeric:n,...r}=e,s=p();return(0,a.jsx)(f.m.td,{...r,ref:t,__css:s.td,"data-is-numeric":n})}),k=n(5735),T=n(95),I=n(6463),z=n(947),C=n(9842),D=n(9212),L=n.n(D),E=n(7499),G=e=>{let{amount:t}=e;return(0,a.jsx)(i.xu,{bg:"gray.800",color:"white",borderRadius:"md",boxShadow:"lg",p:6,w:"full",maxW:"xs",children:(0,a.jsxs)(d.g,{spacing:4,align:"start",children:[(0,a.jsx)(u.X,{size:"md",color:"teal.300",children:"Wallet Balance"}),(0,a.jsxs)(E.x,{fontSize:"2xl",fontWeight:"bold",color:"white",children:["$",t.toFixed(2)]})]})})};function W(){let[e,t]=(0,r.useState)([]),n=(0,s.p)(),h=(0,I.useRouter)(),[m,x]=(0,r.useState)(!0),[f,j]=(0,r.useState)(""),[b,p]=(0,r.useState)(0);async function D(){try{let e=[];await (0,C.QT)((0,C.JU)(T.db,"Users",f)).then(e=>{p(e.data().wallet)}),await (0,C.PL)((0,C.IO)((0,C.hJ)(T.db,"Data"),(0,C.ar)("email","==",f))).then(t=>{t.forEach(t=>{e.push(t.data())})});let n=e.sort((e,t)=>e.timeStamp-t.timeStamp);t(n.reverse())}catch(e){n({title:"Failed to fetch data.",description:"Please try again.",status:"error",duration:5e3,isClosable:!0})}finally{x(!1)}}async function E(){(0,k.w7)(T.I).then(()=>{h.push("/")})}return(0,r.useEffect)(()=>{let e=(0,k.Aj)(T.I,async e=>{e?j(e.email):h.push("/")});return()=>{e()}},[]),(0,r.useEffect)(()=>{f&&D()},[f]),(0,a.jsxs)(i.xu,{w:"100%",minH:"100vh",display:"flex",flexDir:"column",alignItems:"center",bg:"gray.900",children:[(0,a.jsxs)(l.U,{w:"100%",justifyContent:"flex-end",p:4,spacing:4,children:[(0,a.jsx)(c.z,{colorScheme:"blue",size:"sm",onClick:()=>h.push("/"),children:"Home"}),(0,a.jsx)(c.z,{colorScheme:"blue",size:"sm",onClick:()=>E(),children:"Logout"})]}),(0,a.jsx)(o.K,{alignItems:"flex-end",width:"100%",px:4,mb:5,children:(0,a.jsx)(G,{amount:b})}),(0,a.jsxs)(d.g,{spacing:8,boxShadow:"2xl",p:8,bg:"gray.800",borderRadius:"xl",w:{sm:"100%",md:"90%",lg:"80%"},textAlign:"center",overflowX:"auto",children:[(0,a.jsx)(u.X,{size:"lg",color:"orange.300",children:"Dashboard"}),(0,a.jsxs)(g,{variant:"simple",colorScheme:"teal",size:"md",minWidth:"100%",children:[(0,a.jsx)(y,{children:(0,a.jsxs)(w,{children:[(0,a.jsx)(v,{children:"Date"}),(0,a.jsx)(v,{children:"Start Time"}),(0,a.jsx)(v,{children:"End Time"}),(0,a.jsx)(v,{children:"Fare"})]})}),(0,a.jsx)(S,{children:e.map((e,t)=>(0,a.jsxs)(w,{children:[(0,a.jsx)(_,{children:L()(new Date(null==e?void 0:e.startTime)).format("LL")}),(0,a.jsx)(_,{children:L()(new Date(null==e?void 0:e.startTime)).format("LT")}),(0,a.jsx)(_,{children:e.endTime?L()(new Date(null==e?void 0:e.endTime)).format("LT"):""}),(0,a.jsx)(_,{children:null==e?void 0:e.fare})]},t))})]})]}),m&&(0,a.jsx)(z.Z,{})]})}},947:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(7437),r=n(6829);function s(){return(0,a.jsx)("div",{style:{display:"flex",minWidth:"100vw",minHeight:"100vh",alignItems:"center",justifyContent:"center",position:"absolute",backgroundColor:"#00000079"},children:(0,a.jsx)(r.$,{color:"orange.300",size:"lg"})})}},95:function(e,t,n){"use strict";n.d(t,{I:function(){return c},db:function(){return l}});var a=n(5236),r=n(5735),s=n(9842);let i=(0,a.ZF)({apiKey:"AIzaSyBWn8c0M720lkYXMXUOJHDQIDQop62UM8A",authDomain:"railway-facial-tracking.firebaseapp.com",projectId:"railway-facial-tracking",storageBucket:"railway-facial-tracking.appspot.com",messagingSenderId:"413502630264",appId:"1:413502630264:web:c4b4249d43ecdfbd5ac08d"}),l=(0,s.ad)(i),c=(0,r.v0)(i)}},function(e){e.O(0,[358,898,990,645,642,971,23,744],function(){return e(e.s=4816)}),_N_E=e.O()}]);