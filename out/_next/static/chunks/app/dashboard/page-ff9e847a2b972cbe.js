(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1348:function(e,t,n){Promise.resolve().then(n.bind(n,3874))},3874:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var s=n(7437),a=n(2265),r=n(8636),i=n(6566),l=n(8040),c=n(7537),o=n(3789),d=n(9054),u=n(9566),h=n(7529),x=n(7872),m=n(9915),f=n(4644),j=n(7010),b=n(9469);let[g,p]=(0,x.k)({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),y=(0,f.G)((e,t)=>{let n=(0,j.j)("Table",e),{className:a,layout:r,...i}=(0,h.L)(e);return(0,s.jsx)(g,{value:n,children:(0,s.jsx)(b.m.table,{ref:t,__css:{tableLayout:r,...n.table},className:(0,m.cx)("chakra-table",a),...i})})});y.displayName="Table";let w=(0,f.G)((e,t)=>{let n=p();return(0,s.jsx)(b.m.thead,{...e,ref:t,__css:n.thead})}),_=(0,f.G)((e,t)=>{let n=p();return(0,s.jsx)(b.m.tr,{...e,ref:t,__css:n.tr})}),S=(0,f.G)((e,t)=>{let{isNumeric:n,...a}=e,r=p();return(0,s.jsx)(b.m.th,{...a,ref:t,__css:r.th,"data-is-numeric":n})}),v=(0,f.G)((e,t)=>{let n=p();return(0,s.jsx)(b.m.tbody,{...e,ref:t,__css:n.tbody})}),k=(0,f.G)((e,t)=>{let{isNumeric:n,...a}=e,r=p();return(0,s.jsx)(b.m.td,{...a,ref:t,__css:r.td,"data-is-numeric":n})});var I=n(5186),z=n(95),C=n(6463),D=n(947),L=n(9842),T=n(9212),B=n.n(T),E=n(9957),G=e=>{let{amount:t}=e;return(0,s.jsx)(i.x,{bg:"gray.800",color:"white",borderRadius:"md",boxShadow:"lg",p:6,w:"full",maxW:"xs",children:(0,s.jsxs)(d.g,{spacing:4,align:"start",children:[(0,s.jsx)(u.X,{size:"md",color:"teal.300",children:"Wallet Balance"}),(0,s.jsxs)(E.x,{fontSize:"2xl",fontWeight:"bold",color:"white",children:["$",t.toFixed(2)]})]})})};function N(){let[e,t]=(0,a.useState)([]),n=(0,r.p)(),h=(0,C.useRouter)(),[x,m]=(0,a.useState)(!0),[f,j]=(0,a.useState)(""),[b,g]=(0,a.useState)(0);async function p(){try{let e=[];await (0,L.QT)((0,L.JU)(z.db,"Users",f)).then(e=>{g(e.data().wallet)}),await (0,L.PL)((0,L.IO)((0,L.hJ)(z.db,"Data"),(0,L.ar)("email","==",f))).then(t=>{t.forEach(t=>{e.push(t.data())})});let n=e.sort((e,t)=>e.timeStamp-t.timeStamp);t(n.reverse())}catch(e){n({title:"Failed to fetch data.",description:"Please try again.",status:"error",duration:5e3,isClosable:!0})}finally{m(!1)}}async function T(){(0,I.w7)(z.I).then(()=>{h.push("/")})}return(0,a.useEffect)(()=>{let e=(0,I.Aj)(z.I,async e=>{e?j(e.email):h.push("/")});return()=>{e()}},[]),(0,a.useEffect)(()=>{f&&p()},[f]),(0,s.jsxs)(i.x,{w:"100%",minH:"100vh",display:"flex",flexDir:"column",alignItems:"center",bg:"gray.900",children:[(0,s.jsxs)(l.U,{w:"100%",justifyContent:"flex-end",p:4,spacing:4,children:[(0,s.jsx)(c.z,{colorScheme:"blue",size:"sm",onClick:()=>h.push("/"),children:"Home"}),(0,s.jsx)(c.z,{colorScheme:"blue",size:"sm",onClick:()=>T(),children:"Logout"})]}),(0,s.jsx)(o.K,{alignItems:"flex-end",width:"100%",px:4,mb:5,children:(0,s.jsx)(G,{amount:b})}),(0,s.jsxs)(d.g,{spacing:8,boxShadow:"2xl",p:8,bg:"gray.800",borderRadius:"xl",w:{sm:"100%",md:"90%",lg:"80%"},textAlign:"center",overflowX:"auto",children:[(0,s.jsx)(u.X,{size:"lg",color:"orange.300",children:"Dashboard"}),(0,s.jsxs)(y,{variant:"simple",colorScheme:"teal",size:"md",minWidth:"100%",children:[(0,s.jsx)(w,{children:(0,s.jsxs)(_,{children:[(0,s.jsx)(S,{children:"Date"}),(0,s.jsx)(S,{children:"Boarding"}),(0,s.jsx)(S,{children:"Destination"}),(0,s.jsx)(S,{children:"Fare"})]})}),(0,s.jsx)(v,{children:e.map((e,t)=>(0,s.jsxs)(_,{children:[(0,s.jsx)(k,{children:B()(e.timestamp).format("LL")}),(0,s.jsx)(k,{children:e.start}),(0,s.jsx)(k,{children:(null==e?void 0:e.end)||""}),(0,s.jsx)(k,{children:(null==e?void 0:e.fare)||""})]},t))})]})]}),x&&(0,s.jsx)(D.Z,{})]})}},947:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437),a=n(6925);function r(){return(0,s.jsx)("div",{style:{display:"flex",minWidth:"100vw",minHeight:"100vh",alignItems:"center",justifyContent:"center",position:"absolute",backgroundColor:"#00000079"},children:(0,s.jsx)(a.$,{color:"orange.300",size:"lg"})})}},95:function(e,t,n){"use strict";n.d(t,{I:function(){return c},db:function(){return l}});var s=n(5236),a=n(5186),r=n(9842);let i=(0,s.ZF)({apiKey:"AIzaSyBTfo1RILh_9BcsJxndfgrnKDOcYISoBzc",authDomain:"railway-tracking-aa884.firebaseapp.com",projectId:"railway-tracking-aa884",storageBucket:"railway-tracking-aa884.firebasestorage.app",messagingSenderId:"586688207303",appId:"1:586688207303:web:a31a0c82b4bb4a53b561e2"}),l=(0,r.ad)(i),c=(0,a.v0)(i)}},function(e){e.O(0,[358,533,990,481,561,971,23,744],function(){return e(e.s=1348)}),_N_E=e.O()}]);