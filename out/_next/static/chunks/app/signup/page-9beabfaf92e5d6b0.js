(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{9984:function(e,n,l){Promise.resolve().then(l.bind(l,1801))},1801:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return z}});var r=l(7437),t=l(2265),i=l(610),a=l(4340),o=l(9386),s=l(5874),c=l(2081),d=l(4937),u=l(3682),h=l(7499),p=l(6441),m=l(5151),g=l(8713),x=l(9506),f=l(9636),b=l(9372),v=(0,m.G)(function(e,n){let l=(0,g.mq)("Link",e),{className:t,isExternal:i,...a}=(0,x.Lr)(e);return(0,r.jsx)(f.m.a,{target:i?"_blank":void 0,rel:i?"noopener":void 0,ref:n,className:(0,b.cx)("chakra-link",t),...a,__css:l})});v.displayName="Link";var y=l(530),j=l(8472),C=l(6463),S=l(6820),k=l.n(S),w=l(5735),I=l(947),_=l(95);function z(){let[e,n]=(0,t.useState)(""),[l,m]=(0,t.useState)(""),[g,x]=(0,t.useState)(""),[f,b]=(0,t.useState)(null),[S,z]=(0,t.useState)(!1),F=(0,t.useRef)(null),R=(0,i.p)(),P=(0,C.useRouter)(),[N,B]=(0,t.useState)(!0),[D,q]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=(0,w.Aj)(_.I,async e=>{e?D&&P.push("/dashboard"):(q(!1),B(!1))});return()=>{e()}},[]);let L=async n=>{try{let n=new FormData;n.append("name",e),n.append("email",l),f&&n.append("picture",f),await j.Z.post("/api/signup",n).then(n=>{(0,w.Xb)(_.I,l,g).then(n=>{let l=n.user;(0,w.ck)(l,{displayName:e}).then(()=>{q(!0),R({title:"Signup successful.",description:"Your account has been created successfully.",status:"success",duration:5e3,isClosable:!0})})})})}catch(e){R({title:"Signup failed.",description:"Please try again.",status:"error",duration:5e3,isClosable:!0})}};return(0,r.jsxs)(a.xu,{w:"100vw",h:"100vh",display:"flex",alignItems:"center",bg:"gray.900",flexDir:"column",children:[(0,r.jsx)(o.U,{w:"100%",justifyContent:"flex-end",p:4,children:(0,r.jsx)(s.z,{colorScheme:"blue",size:"sm",onClick:()=>P.push("/"),children:"Home"})}),(0,r.jsxs)(c.K,{spacing:8,w:"100%",justifyContent:"center",alignItems:"center",flexDirection:{base:"column",md:"row"},children:[(0,r.jsxs)(d.g,{spacing:8,boxShadow:"2xl",p:8,bg:"gray.800",borderRadius:"xl",w:"90%",maxW:"md",textAlign:"center",mt:8,children:[(0,r.jsx)(u.X,{size:"lg",color:"orange.300",children:"Signup"}),(0,r.jsx)(h.x,{fontSize:"md",color:"gray.400",children:"Create a new account."}),(0,r.jsx)(p.I,{_hover:{borderColor:"blue.500"},borderRadius:0,borderColor:"#454545",_placeholder:{color:"gray"},placeholder:"Name",type:"text",value:e,onChange:e=>n(e.target.value),bg:"gray.700",color:"white"}),(0,r.jsx)(p.I,{_hover:{borderColor:"blue.500"},borderRadius:0,borderColor:"#454545",_placeholder:{color:"gray"},placeholder:"Email",type:"email",value:l,onChange:e=>m(e.target.value),bg:"gray.700",color:"white"}),(0,r.jsx)(p.I,{_hover:{borderColor:"blue.500"},borderRadius:0,borderColor:"#454545",_placeholder:{color:"gray"},placeholder:"Password",type:"password",value:g,onChange:e=>x(e.target.value),bg:"gray.700",color:"white"}),(0,r.jsx)(s.z,{onClick:()=>{B(!0),L()},colorScheme:"blue",size:"md",mt:4,isDisabled:!(l.includes("@")&&l.includes(".com"))||!(g.length>7)||!f||0==e.trim().length,children:"Signup"}),(0,r.jsxs)(h.x,{mt:2,color:"white",children:["Already have an account?"," ",(0,r.jsx)(v,{_hover:{color:"blue.300"},href:"/login",children:"Login"})]})]}),(0,r.jsxs)(d.g,{spacing:4,boxShadow:"2xl",p:8,bg:"gray.800",borderRadius:"xl",w:"90%",maxW:"md",textAlign:"center",mt:8,justifyContent:"center",children:[!S&&(0,r.jsxs)(c.K,{spacing:4,alignItems:"center",children:[(0,r.jsx)(h.x,{fontSize:"sm",color:"white",children:"Select a picture to upload or use your camera"}),(0,r.jsxs)(o.U,{spacing:4,children:[(0,r.jsxs)(s.z,{colorScheme:"blue",size:"md",children:["Select Picture",(0,r.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:e=>{b(e.target.files[0])}})]}),(0,r.jsx)(s.z,{colorScheme:"blue",size:"md",onClick:()=>z(!0),children:"Use Camera"})]})]}),S&&(0,r.jsxs)(d.g,{spacing:4,alignItems:"center",children:[(0,r.jsx)(k(),{audio:!1,ref:F,screenshotFormat:"image/png",width:320,height:240,videoConstraints:{facingMode:"user"}}),(0,r.jsxs)(o.U,{spacing:4,children:[(0,r.jsx)(s.z,{colorScheme:"green",size:"md",onClick:()=>{fetch(F.current.getScreenshot()).then(e=>e.blob()).then(e=>{b(new File([e],"capture.png",{type:"image/png"})),z(!1)})},children:"Capture"}),(0,r.jsx)(s.z,{colorScheme:"red",size:"md",onClick:()=>z(!1),children:"Cancel"})]})]}),f&&(0,r.jsxs)(a.xu,{children:[(0,r.jsx)(h.x,{fontSize:"sm",color:"white",children:"Selected Image:"}),(0,r.jsx)(y.E,{src:URL.createObjectURL(f),alt:"Selected",boxSize:"200px",objectFit:"cover",borderRadius:"md",mt:2})]})]})]}),N?(0,r.jsx)(I.Z,{}):null]})}},947:function(e,n,l){"use strict";l.d(n,{Z:function(){return i}});var r=l(7437),t=l(6829);function i(){return(0,r.jsx)("div",{style:{display:"flex",minWidth:"100vw",minHeight:"100vh",alignItems:"center",justifyContent:"center",position:"absolute",backgroundColor:"#00000079"},children:(0,r.jsx)(t.$,{color:"orange.300",size:"lg"})})}},95:function(e,n,l){"use strict";l.d(n,{I:function(){return s},db:function(){return o}});var r=l(5236),t=l(5735),i=l(9842);let a=(0,r.ZF)({apiKey:"AIzaSyBWn8c0M720lkYXMXUOJHDQIDQop62UM8A",authDomain:"railway-facial-tracking.firebaseapp.com",projectId:"railway-facial-tracking",storageBucket:"railway-facial-tracking.appspot.com",messagingSenderId:"413502630264",appId:"1:413502630264:web:c4b4249d43ecdfbd5ac08d"}),o=(0,i.ad)(a),s=(0,t.v0)(a)},6441:function(e,n,l){"use strict";l.d(n,{I:function(){return x}});var r=l(2730),t=l(4697),i=l(5151),a=l(8713),o=l(9506),s=l(9636),c=l(9372),d=l(2265),u=l(7437),[h,p]=(0,r.k)({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[m,g]=(0,r.k)({strict:!1,name:"FormControlContext"});(0,i.G)(function(e,n){let l=(0,a.jC)("Form",e),{getRootProps:r,htmlProps:i,...p}=function(e){let{id:n,isRequired:l,isInvalid:r,isDisabled:i,isReadOnly:a,...o}=e,s=(0,d.useId)(),u=n||"field-".concat(s),h="".concat(u,"-label"),p="".concat(u,"-feedback"),m="".concat(u,"-helptext"),[g,x]=(0,d.useState)(!1),[f,b]=(0,d.useState)(!1),[v,y]=(0,d.useState)(!1),j=(0,d.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{id:m,...e,ref:(0,t.lq)(n,e=>{e&&b(!0)})}},[m]),C=(0,d.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:n,"data-focus":(0,c.PB)(v),"data-disabled":(0,c.PB)(i),"data-invalid":(0,c.PB)(r),"data-readonly":(0,c.PB)(a),id:void 0!==e.id?e.id:h,htmlFor:void 0!==e.htmlFor?e.htmlFor:u}},[u,i,v,r,a,h]),S=(0,d.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{id:p,...e,ref:(0,t.lq)(n,e=>{e&&x(!0)}),"aria-live":"polite"}},[p]),k=(0,d.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,...o,ref:n,role:"group","data-focus":(0,c.PB)(v),"data-disabled":(0,c.PB)(i),"data-invalid":(0,c.PB)(r),"data-readonly":(0,c.PB)(a)}},[o,i,v,r,a]);return{isRequired:!!l,isInvalid:!!r,isReadOnly:!!a,isDisabled:!!i,isFocused:!!v,onFocus:()=>y(!0),onBlur:()=>y(!1),hasFeedbackText:g,setHasFeedbackText:x,hasHelpText:f,setHasHelpText:b,id:u,labelId:h,feedbackId:p,helpTextId:m,htmlProps:o,getHelpTextProps:j,getErrorMessageProps:S,getRootProps:k,getLabelProps:C,getRequiredIndicatorProps:(0,d.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...e,ref:n,role:"presentation","aria-hidden":!0,children:e.children||"*"}},[])}}((0,o.Lr)(e)),g=(0,c.cx)("chakra-form-control",e.className);return(0,u.jsx)(m,{value:p,children:(0,u.jsx)(h,{value:l,children:(0,u.jsx)(s.m.div,{...r({},n),className:g,__css:l.container})})})}).displayName="FormControl",(0,i.G)(function(e,n){let l=g(),r=p(),t=(0,c.cx)("chakra-form__helper-text",e.className);return(0,u.jsx)(s.m.div,{...null==l?void 0:l.getHelpTextProps(e,n),__css:r.helperText,className:t})}).displayName="FormHelperText";var x=(0,i.G)(function(e,n){let{htmlSize:l,...r}=e,t=(0,a.jC)("Input",r),i=function(e){let{isDisabled:n,isInvalid:l,isReadOnly:r,isRequired:t,...i}=function(e){var n,l,r;let t=g(),{id:i,disabled:a,readOnly:o,required:s,isRequired:d,isInvalid:u,isReadOnly:h,isDisabled:p,onFocus:m,onBlur:x,...f}=e,b=e["aria-describedby"]?[e["aria-describedby"]]:[];return(null==t?void 0:t.hasFeedbackText)&&(null==t?void 0:t.isInvalid)&&b.push(t.feedbackId),(null==t?void 0:t.hasHelpText)&&b.push(t.helpTextId),{...f,"aria-describedby":b.join(" ")||void 0,id:null!=i?i:null==t?void 0:t.id,isDisabled:null!=(n=null!=a?a:p)?n:null==t?void 0:t.isDisabled,isReadOnly:null!=(l=null!=o?o:h)?l:null==t?void 0:t.isReadOnly,isRequired:null!=(r=null!=s?s:d)?r:null==t?void 0:t.isRequired,isInvalid:null!=u?u:null==t?void 0:t.isInvalid,onFocus:(0,c.v0)(null==t?void 0:t.onFocus,m),onBlur:(0,c.v0)(null==t?void 0:t.onBlur,x)}}(e);return{...i,disabled:n,readOnly:r,required:t,"aria-invalid":(0,c.Qm)(l),"aria-required":(0,c.Qm)(t),"aria-readonly":(0,c.Qm)(r)}}((0,o.Lr)(r)),d=(0,c.cx)("chakra-input",e.className);return(0,u.jsx)(s.m.input,{size:l,...i,__css:t.field,ref:n,className:d})});x.displayName="Input",x.id="Input"}},function(e){e.O(0,[358,898,645,682,846,971,23,744],function(){return e(e.s=9984)}),_N_E=e.O()}]);