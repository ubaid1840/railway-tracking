(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{8517:function(e,r,n){Promise.resolve().then(n.bind(n,9781))},9781:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return N}});var t=n(7437),a=n(2265),s=n(8636),i=n(6566),l=n(8040),o=n(7537),c=n(3789),u=n(9054),d=n(9566),h=n(9957),g=n(7632),p=n(7529),m=n(9915),x=n(4644),b=n(7010),f=n(9469);let j=(0,x.G)(function(e,r){let n=(0,b.m)("Link",e),{className:a,isExternal:s,...i}=(0,p.L)(e);return(0,t.jsx)(f.m.a,{target:s?"_blank":void 0,rel:s?"noopener":void 0,ref:r,className:(0,m.cx)("chakra-link",a),...i,__css:n})});j.displayName="Link";var y=n(7791),C=n(8472),v=n(6463),w=n(6820),S=n.n(w),k=n(5186),I=n(947),_=n(95),z=n(9842),R=n(357);function N(){let[e,r]=(0,a.useState)(""),[n,p]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[b,f]=(0,a.useState)(null),[w,N]=(0,a.useState)(!1),L=(0,a.useRef)(null),U=(0,s.p)(),A=(0,v.useRouter)(),[E,D]=(0,a.useState)(!0),[B,F]=(0,a.useState)(!0),K=(0,a.useRef)();(0,a.useEffect)(()=>{let e=(0,k.Aj)(_.I,async e=>{e?B&&A.push("/dashboard"):(F(!1),D(!1))});return()=>{e()}},[]);let O=async()=>{try{D(!0);let r=new FormData;r.append("username",n),r.append("image",b),await C.Z.post("".concat(R.env.NEXT_PUBLIC_BACKEND_URL,"/signup"),r,{headers:{"Access-Control-Allow-Origin":"*"}}).then(r=>{(0,k.Xb)(_.I,n,m).then(async r=>{await (0,z.pl)((0,z.JU)(_.db,"Users",n),{email:n,name:e,wallet:5e3});let t=r.user;(0,k.ck)(t,{displayName:e}).then(()=>{F(!0),U({title:"Signup successful.",description:"Your account has been created successfully.",status:"success",duration:5e3,isClosable:!0})})})})}catch(e){D(!1),U({title:"Signup failed.",description:"Please try again.",status:"error",duration:5e3,isClosable:!0})}};return(0,t.jsxs)(i.x,{w:"100vw",h:"100vh",display:"flex",alignItems:"center",bg:"gray.900",flexDir:"column",children:[(0,t.jsx)(l.U,{w:"100%",justifyContent:"flex-end",p:4,children:(0,t.jsx)(o.z,{colorScheme:"blue",size:"sm",onClick:()=>A.push("/"),children:"Home"})}),(0,t.jsxs)(c.K,{spacing:8,w:"100%",justifyContent:"center",alignItems:"center",flexDirection:{base:"column",md:"row"},children:[(0,t.jsxs)(u.g,{spacing:8,boxShadow:"2xl",p:8,bg:"gray.800",borderRadius:"xl",w:"90%",maxW:"md",textAlign:"center",mt:8,children:[(0,t.jsx)(d.X,{size:"lg",color:"orange.300",children:"Signup"}),(0,t.jsx)(h.x,{fontSize:"md",color:"gray.400",children:"Create a new account."}),(0,t.jsx)(g.I,{_hover:{borderColor:"blue.500"},borderRadius:0,borderColor:"#454545",_placeholder:{color:"gray"},placeholder:"Name",type:"text",value:e,onChange:e=>r(e.target.value),bg:"gray.700",color:"white"}),(0,t.jsx)(g.I,{_hover:{borderColor:"blue.500"},borderRadius:0,borderColor:"#454545",_placeholder:{color:"gray"},placeholder:"Email",type:"email",value:n,onChange:e=>p(e.target.value),bg:"gray.700",color:"white"}),(0,t.jsx)(g.I,{_hover:{borderColor:"blue.500"},borderRadius:0,borderColor:"#454545",_placeholder:{color:"gray"},placeholder:"Password",type:"password",value:m,onChange:e=>x(e.target.value),bg:"gray.700",color:"white"}),(0,t.jsx)(o.z,{onClick:()=>{O()},colorScheme:"blue",size:"md",mt:4,isDisabled:!(n.includes("@")&&n.includes(".com"))||!(m.length>7)||!b||0==e.trim().length,children:"Signup"}),(0,t.jsxs)(h.x,{mt:2,color:"white",children:["Already have an account?"," ",(0,t.jsx)(j,{_hover:{color:"blue.300"},href:"/login",children:"Login"})]})]}),(0,t.jsxs)(u.g,{spacing:4,boxShadow:"2xl",p:8,bg:"gray.800",borderRadius:"xl",w:"90%",maxW:"md",textAlign:"center",mt:8,justifyContent:"center",children:[!w&&(0,t.jsxs)(c.K,{spacing:4,alignItems:"center",children:[(0,t.jsx)(h.x,{fontSize:"sm",color:"white",children:"Select a picture to upload or use your camera"}),(0,t.jsxs)(l.U,{spacing:4,children:[(0,t.jsx)(o.z,{onClick:()=>{var e;return null==K?void 0:null===(e=K.current)||void 0===e?void 0:e.click()},colorScheme:"blue",size:"md",children:"Select Picture"}),(0,t.jsx)("input",{style:{display:"none"},ref:K,type:"file",accept:"image/*",hidden:!0,onChange:e=>{f(e.target.files[0])}}),(0,t.jsx)(o.z,{colorScheme:"blue",size:"md",onClick:()=>N(!0),children:"Use Camera"})]})]}),w&&(0,t.jsxs)(u.g,{spacing:4,alignItems:"center",children:[(0,t.jsx)(S(),{audio:!1,ref:L,screenshotFormat:"image/png",width:320,height:240,videoConstraints:{facingMode:"user"}}),(0,t.jsxs)(l.U,{spacing:4,children:[(0,t.jsx)(o.z,{colorScheme:"green",size:"md",onClick:()=>{fetch(L.current.getScreenshot()).then(e=>e.blob()).then(e=>{f(new File([e],"capture.png",{type:"image/png"})),N(!1)})},children:"Capture"}),(0,t.jsx)(o.z,{colorScheme:"red",size:"md",onClick:()=>N(!1),children:"Cancel"})]})]}),b&&(0,t.jsxs)(i.x,{children:[(0,t.jsx)(h.x,{fontSize:"sm",color:"white",children:"Selected Image:"}),(0,t.jsx)(y.E,{src:URL.createObjectURL(b),alt:"Selected",boxSize:"200px",objectFit:"cover",borderRadius:"md",mt:2})]})]})]}),E?(0,t.jsx)(I.Z,{}):null]})}},947:function(e,r,n){"use strict";n.d(r,{Z:function(){return s}});var t=n(7437),a=n(6925);function s(){return(0,t.jsx)("div",{style:{display:"flex",minWidth:"100vw",minHeight:"100vh",alignItems:"center",justifyContent:"center",position:"absolute",backgroundColor:"#00000079"},children:(0,t.jsx)(a.$,{color:"orange.300",size:"lg"})})}},95:function(e,r,n){"use strict";n.d(r,{I:function(){return o},db:function(){return l}});var t=n(5236),a=n(5186),s=n(9842);let i=(0,t.ZF)({apiKey:"AIzaSyBTfo1RILh_9BcsJxndfgrnKDOcYISoBzc",authDomain:"railway-tracking-aa884.firebaseapp.com",projectId:"railway-tracking-aa884",storageBucket:"railway-tracking-aa884.firebasestorage.app",messagingSenderId:"586688207303",appId:"1:586688207303:web:a31a0c82b4bb4a53b561e2"}),l=(0,s.ad)(i),o=(0,a.v0)(i)},7632:function(e,r,n){"use strict";n.d(r,{I:function(){return u}});var t=n(7437),a=n(7529),s=n(9915),i=n(1379),l=n(4644),o=n(7010),c=n(9469);let u=(0,l.G)(function(e,r){let{htmlSize:n,...l}=e,u=(0,o.j)("Input",l),d=(0,a.L)(l),h=(0,i.Y)(d),g=(0,s.cx)("chakra-input",e.className);return(0,t.jsx)(c.m.input,{size:n,...h,__css:u.field,ref:r,className:g})});u.displayName="Input",u.id="Input"}},function(e){e.O(0,[358,533,481,561,420,971,23,744],function(){return e(e.s=8517)}),_N_E=e.O()}]);