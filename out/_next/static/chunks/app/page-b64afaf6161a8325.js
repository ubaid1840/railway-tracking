(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9159:function(e,i,n){Promise.resolve().then(n.bind(n,1969))},1969:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return z}});var t=n(7437),s=n(2265),c=n(610),r=n(4340),a=n(9386),l=n(5874),o=n(4937),u=n(3682),d=n(7499),g=n(2081),h=n(530),m=n(6463),p=n(6820),f=n.n(p),b=n(8472),x=n(9842),j=n(95),S=n(947),y=n(5735);function z(){let[e,i]=(0,s.useState)(null),[n,p]=(0,s.useState)(!1),z=(0,s.useRef)(null),w=(0,c.p)(),k=(0,m.useRouter)(),[C,v]=(0,s.useState)(!1),[I,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=(0,y.Aj)(j.I,async e=>{e?D(!0):v(!1)});return()=>{e()}},[]);let R=async()=>{try{await b.Z.post("/api/verify",formData).then(async()=>{new FormData().append("picture",e);let n=new Date;await (0,x.ET)((0,x.hJ)(j.db,"Data"),{email:"ubaid@gmail.com",timeStamp:n.getTime()}).then(()=>{w({title:"Submitted.",description:"Your image has been submitted successfully.",status:"success",duration:5e3,isClosable:!0}),i(null)})})}catch(e){w({title:"Submission failed.",description:"Please try again.",status:"error",duration:5e3,isClosable:!0})}finally{v(!1)}};return(0,t.jsxs)(r.xu,{w:"100vw",h:"100vh",display:"flex",flexDirection:"column",bg:"gray.900",bgImage:"/image4.jpg",bgRepeat:"no-repeat",bgSize:"cover",bgPosition:"center",alignItems:"center",children:[(0,t.jsxs)(a.U,{w:"100%",justifyContent:"flex-end",p:4,children:[I?(0,t.jsx)(l.z,{colorScheme:"blue",size:"sm",onClick:()=>k.push("/dashboard"),children:"Dashboard"}):(0,t.jsx)(l.z,{colorScheme:"blue",size:"sm",onClick:()=>k.push("/login"),children:"Login"}),(0,t.jsx)(l.z,{colorScheme:"blue",size:"sm",onClick:()=>k.push("/signup"),children:"Signup"})]}),(0,t.jsxs)(o.g,{spacing:6,boxShadow:"lg",p:8,bg:"rgba(0, 0, 0, 0.6)",borderRadius:"xl",w:"90%",maxW:"lg",textAlign:"center",alignSelf:"center",children:[(0,t.jsx)(u.X,{size:"lg",color:"orange.300",children:"Railway Tracking System"}),(0,t.jsx)(d.x,{fontSize:"md",color:"gray.400",children:"A modern way to track fares using facial recognition."}),!n&&(0,t.jsxs)(g.K,{spacing:4,alignItems:"center",children:[(0,t.jsx)(d.x,{fontSize:"sm",color:"white",children:"Select a picture to recognize or use your camera"}),(0,t.jsxs)(a.U,{spacing:4,children:[(0,t.jsxs)(l.z,{as:"label",colorScheme:"blue",size:"md",children:["Select Picture",(0,t.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:e=>{i(e.target.files[0])}})]}),(0,t.jsx)(l.z,{colorScheme:"blue",size:"md",onClick:()=>p(!0),children:"Use Camera"})]})]}),n&&(0,t.jsxs)(o.g,{spacing:4,alignItems:"center",children:[(0,t.jsx)(f(),{audio:!1,ref:z,screenshotFormat:"image/png",width:320,height:240,videoConstraints:{facingMode:"user"}}),(0,t.jsxs)(a.U,{spacing:4,children:[(0,t.jsx)(l.z,{colorScheme:"green",size:"md",onClick:()=>{fetch(z.current.getScreenshot()).then(e=>e.blob()).then(e=>{i(new File([e],"capture.png",{type:"image/png"})),p(!1)})},children:"Capture"}),(0,t.jsx)(l.z,{colorScheme:"red",size:"md",onClick:()=>p(!1),children:"Cancel"})]})]}),e&&(0,t.jsxs)(r.xu,{children:[(0,t.jsx)(d.x,{fontSize:"sm",color:"white",children:"Selected Image:"}),(0,t.jsx)(h.E,{src:URL.createObjectURL(e),alt:"Selected",boxSize:"200px",objectFit:"cover",borderRadius:"md",mt:2})]}),(0,t.jsx)(l.z,{onClick:()=>{v(!0),R()},colorScheme:"blue",size:"md",isDisabled:!e,children:"Submit"})]}),C?(0,t.jsx)(S.Z,{}):null]})}},947:function(e,i,n){"use strict";n.d(i,{Z:function(){return c}});var t=n(7437),s=n(6829);function c(){return(0,t.jsx)("div",{style:{display:"flex",minWidth:"100vw",minHeight:"100vh",alignItems:"center",justifyContent:"center",position:"absolute",backgroundColor:"#00000079"},children:(0,t.jsx)(s.$,{color:"orange.300",size:"lg"})})}},95:function(e,i,n){"use strict";n.d(i,{I:function(){return l},db:function(){return a}});var t=n(5236),s=n(5735),c=n(9842);let r=(0,t.ZF)({apiKey:"AIzaSyBWn8c0M720lkYXMXUOJHDQIDQop62UM8A",authDomain:"railway-facial-tracking.firebaseapp.com",projectId:"railway-facial-tracking",storageBucket:"railway-facial-tracking.appspot.com",messagingSenderId:"413502630264",appId:"1:413502630264:web:c4b4249d43ecdfbd5ac08d"}),a=(0,c.ad)(r),l=(0,s.v0)(r)}},function(e){e.O(0,[358,898,645,682,846,971,23,744],function(){return e(e.s=9159)}),_N_E=e.O()}]);